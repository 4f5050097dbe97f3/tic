{"version":3,"sources":["pages/login/VDOM.tsx","pages/login/main.tsx","pages/game/useHooks.ts","pages/game/VDOM.tsx","pages/game/main.tsx","app.tsx","index.tsx"],"names":["VDOM","props","create","join","id","type","name","hidden","defaultChecked","className","htmlFor","placeholder","maxLength","onClick","Main","serverStatus","Status","setStatus","sign","e","a","preventDefault","roomID","target","parentNode","children","value","passcode","style","setProperty","axios","post","data","isLoggedIn","mark","convert","x","WAITING_FOR_OTHER_PLAYER_TO_JOIN","O_next","YOUR_TURN","WAITING_FOR_OTHER_PLAYER","X_next","O_won","YOU_WON","YOU_LOST","X_won","Draw","useHooks","begin","useState","initialized","socket","page","setPage","btn","status","game","setGame","useEffect","io","query","on","handleClick","map","item","index","emit","App","React","path","to","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8f5e3e60.chunk.js","sourcesContent":["import React from 'react';\nimport './style.css';\n\ninterface Props {\n    create: (e: any) => Promise<void>,\n    join: (e: any) => Promise<void>,\n}\n\n\nconst VDOM: React.FC<Props> = props => {\n\n    const { create, join } = props\n\n    return (\n        <div id=\"login\" >\n            <input type=\"radio\" name=\"tab\" id=\"create\" hidden defaultChecked={true} />\n            <input type=\"radio\" name=\"tab\" id=\"join\" hidden />\n\n            <main>\n                <div className=\"tab\">\n                    <label htmlFor=\"create\" className=\"create_tab\">Create Room</label>\n                    <label htmlFor=\"join\" className=\"join_tab\">Join Room</label>\n                </div>\n                <div className=\"form\">\n                    <form className=\"create_room\">\n                        <h2>Create Your Room</h2>\n                        <label><input type=\"text\" placeholder=\"enter your room id\" maxLength={8} /></label>\n                        <label><input type=\"text\" placeholder=\"enter the passcode\" maxLength={8} /></label>\n                        <button onClick={create}>Create</button>\n                    </form>\n                    <form className=\"join_room\">\n                        <h2>Join A Room</h2>\n                        <label><input type=\"text\" placeholder=\"enter the room id\" maxLength={8} /></label>\n                        <label><input type=\"text\" placeholder=\"enter the passcode\" maxLength={8} /></label>\n                        <button onClick={join}>Join</button>\n                    </form>\n                </div>\n            </main>\n        </div>\n    )\n}\n\nexport default VDOM\n","import React from 'react';\nimport axios from 'axios';\nimport VDOM from './VDOM';\n\ninterface Status {\n    isLoggedIn: boolean,\n    roomID: string,\n    mark: 'O' | 'X' | '',\n}\n\nfunction Main(props: { sign: React.Dispatch<React.SetStateAction<Status>> }) {\n\n    const setStatus = props.sign\n\n    const create = async (e: any) => {\n        e.preventDefault()\n\n        const roomID = e.target.parentNode.children[1].children[0].value\n        const passcode = e.target.parentNode.children[2].children[0].value\n\n        if (roomID === '') {\n            e.target.parentNode.children[1].style.setProperty('--after', \"'\" + 'Room ID is empty' + \"'\")\n            return\n        }\n        if (passcode === '') {\n            e.target.parentNode.children[1].style.setProperty('--after', \"'\" + 'Passcode is empty' + \"'\")\n            return\n        }\n\n        const { data } = await axios.post('/api/login/create', { roomID, passcode })\n\n        if (data === 'succeed') {\n            setStatus({ isLoggedIn: true, mark: 'O', roomID })\n            return\n        }\n\n        e.target.parentNode.children[1].style.setProperty('--after', \"'\" + data + \"'\")\n\n    }\n\n    const join = async (e: any) => {\n        e.preventDefault()\n\n        const roomID = e.target.parentNode.children[1].children[0].value\n        const passcode = e.target.parentNode.children[2].children[0].value\n\n        if (roomID === '') {\n            e.target.parentNode.children[1].style.setProperty('--after', \"'\" + 'Room ID is empty' + \"'\")\n            return\n        }\n        if (passcode === '') {\n            e.target.parentNode.children[1].style.setProperty('--after', \"'\" + 'Passcode is empty' + \"'\")\n            return\n        }\n\n        const { data } = await axios.post('/api/login/join', { roomID, passcode })\n\n        if (data === 'succeed') {\n            setStatus({ isLoggedIn: true, mark: 'X', roomID })\n            return\n        }\n\n        e.target.parentNode.children[1].style.setProperty('--after', \"'\" + data + \"'\")\n\n    }\n\n\n    return <VDOM create={create} join={join} />\n}\n\n\n\nexport default Main\n","import { useState, useEffect } from 'react';\nimport { io, Socket } from 'socket.io-client';\n\ninterface pageState {\n    initialized: boolean,\n    socket: Socket | null\n}\n\ntype chess = 'O' | 'X' | ''\ntype Btn = [chess, chess, chess, chess, chess, chess, chess, chess, chess,]\n\nenum serverStatus {\n    WAITING_FOR_OTHER_PLAYER_TO_JOIN,\n    O_next,\n    X_next,\n    O_won,\n    X_won,\n    Draw,\n}\n\nenum Status {\n    WAITING_FOR_OTHER_PLAYER_TO_JOIN = 'waiting for other player to join',\n    YOUR_TURN = 'your turn',\n    WAITING_FOR_OTHER_PLAYER = 'waiting for other player',\n    YOU_WON = 'you won',\n    YOU_LOST = 'you lost',\n    Draw = 'draw',\n}\n\ninterface gameState {\n    btn: Btn,\n    status: Status\n}\n\nfunction convert(x: serverStatus, mark: string): Status {\n    if (x === serverStatus.WAITING_FOR_OTHER_PLAYER_TO_JOIN) return Status.WAITING_FOR_OTHER_PLAYER_TO_JOIN\n\n    if (x === serverStatus.O_next) {\n        if (mark === 'O') return Status.YOUR_TURN\n        return Status.WAITING_FOR_OTHER_PLAYER\n    }\n    if (x === serverStatus.X_next) {\n        if (mark === 'X') return Status.YOUR_TURN\n        return Status.WAITING_FOR_OTHER_PLAYER\n    }\n    if (x === serverStatus.O_won) {\n        if (mark === 'O') return Status.YOU_WON\n        return Status.YOU_LOST\n    }\n    if (x === serverStatus.X_won) {\n        if (mark === 'X') return Status.YOU_WON\n        return Status.YOU_LOST\n    }\n\n    return Status.Draw\n\n}\n\n\n\nfunction useHooks(roomID: string, mark: string) {\n\n    const start: Btn = ['', '', '', '', '', '', '', '', '',]\n    const begin = (mark === 'O') ? Status.WAITING_FOR_OTHER_PLAYER_TO_JOIN : Status.WAITING_FOR_OTHER_PLAYER\n\n    const [page, setPage] = useState<pageState>({ initialized: false, socket: null })\n    const [game, setGame] = useState<gameState>({ btn: start, status: begin })\n\n    useEffect(() => {\n        const socket = io({\n            query: { roomID, mark }\n        })\n\n        socket.on('connect', () => {\n            setPage({ initialized: true, socket })\n        })\n\n        socket.on('update', (btn, status: serverStatus) => {\n\n            setGame({ btn, status: convert(status, mark) })\n        })\n    }, [])\n\n    return { ...page, ...game }\n\n}\n\nexport default useHooks\n","import React from 'react';\nimport './style.css';\n\ntype chess = 'O' | 'X' | ''\ntype Btn = [chess, chess, chess, chess, chess, chess, chess, chess, chess,]\n\nenum Status {\n    WAITING_FOR_OTHER_PLAYER_TO_JOIN = 'waiting for other player to join',\n    YOUR_TURN = 'your turn',\n    WAITING_FOR_OTHER_PLAYER = 'waiting for other player',\n    YOU_WON = 'you won',\n    YOU_LOST = 'you lost',\n    Draw = 'draw',\n    Error = 'error',\n}\n\ninterface Props {\n    btn: Btn,\n    status: Status,\n    handleClick: (index: number) => void\n}\n\nconst VDOM: React.FC<Props> = (props) => {\n\n    const { btn, status, handleClick } = props\n\n    return (\n        <>\n            <div className=\"tic\">\n                {\n                    btn.map((item, index) => {\n                        return <button key={index} onClick={e => handleClick(index)}>{item}</button>\n                    })\n                }\n            </div>\n            <p className=\"status\">{status}</p>\n        </>\n    )\n}\n\nexport default VDOM\n","import react from 'react';\nimport useHooks from './useHooks';\nimport VDOM from './VDOM';\n\ninterface Props {\n    roomID: string,\n    mark: 'O' | 'X' | ''\n}\n\nfunction Main(props: Props) {\n\n    const { roomID, mark } = props\n    const { initialized, btn, status, socket } = useHooks(roomID, mark)\n\n    if (initialized === false || socket === null) return null\n\n    const handleClick = (index: number) => {\n        if (status === 'your turn' && btn[index] === '') {\n            socket.emit('one_step', index, mark)\n        }\n    }\n\n\n    return <VDOM btn={btn} status={status} handleClick={handleClick} />\n}\n\n\n\nexport default Main\n","import React from 'react';\nimport { BrowserRouter as Router, Switch, Route, Redirect, Link } from 'react-router-dom';\n\nimport Login from './pages/login/main';\nimport Game from './pages/game/main';\n\ninterface Status {\n    isLoggedIn: boolean,\n    roomID: string,\n    mark: 'O' | 'X' | '',\n}\n\n\nfunction App() {\n\n    const [status, setStatus] = React.useState<Status>({ isLoggedIn: false, roomID: '', mark: '' })\n\n    if (status.isLoggedIn === false) {\n\n        return (\n            <Router>\n                <Switch>\n                    <Route path=\"/login\">\n                        <Login sign={setStatus} />\n                    </Route>\n                    <Route path=\"*\">\n                        <Redirect to=\"/login\"></Redirect>\n                    </Route>\n                </Switch>\n\n            </Router>\n        )\n    }\n\n    return (\n        <Router>\n            <Switch>\n                <Route path=\"/game\">\n                    <Game roomID={status.roomID} mark={status.mark} />\n                </Route>\n                <Route path=\"*\">\n                    <Redirect to=\"/game\"></Redirect>\n                </Route>\n            </Switch>\n\n        </Router>\n    )\n\n\n}\n\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './app';\nimport './index.css';\n\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}